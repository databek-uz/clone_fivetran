# =============================================================================
# PipeZone Platform - Environment Configuration Template
# =============================================================================
# Copy this file to .env and update with your values
# DO NOT commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Platform Settings
# -----------------------------------------------------------------------------
PLATFORM_NAME=PipeZone
PLATFORM_DOMAIN=localhost
COMPOSE_PROJECT_NAME=pipezone

# -----------------------------------------------------------------------------
# MinIO Configuration (S3-compatible storage)
# -----------------------------------------------------------------------------
MINIO_ROOT_USER=admin
MINIO_ROOT_PASSWORD=changeme123456
MINIO_ENDPOINT=minio:9000
MINIO_CONSOLE_PORT=9001
MINIO_API_PORT=9000
MINIO_BROWSER=on

# -----------------------------------------------------------------------------
# PostgreSQL Configuration (Airflow metadata database)
# -----------------------------------------------------------------------------
POSTGRES_USER=airflow
POSTGRES_PASSWORD=airflow123
POSTGRES_DB=airflow
POSTGRES_PORT=5432

# -----------------------------------------------------------------------------
# Redis Configuration (Airflow Celery broker)
# -----------------------------------------------------------------------------
REDIS_PASSWORD=redis123
REDIS_PORT=6379

# -----------------------------------------------------------------------------
# Airflow Configuration
# -----------------------------------------------------------------------------
AIRFLOW_VERSION=2.8.1
AIRFLOW__CORE__EXECUTOR=CeleryExecutor
AIRFLOW__CORE__FERNET_KEY=
AIRFLOW__CORE__DAGS_ARE_PAUSED_AT_CREATION=true
AIRFLOW__CORE__LOAD_EXAMPLES=false
AIRFLOW__API__AUTH_BACKENDS=airflow.api.auth.backend.basic_auth,airflow.api.auth.backend.session
AIRFLOW__SCHEDULER__ENABLE_HEALTH_CHECK=true

# Airflow Database Connection
AIRFLOW__DATABASE__SQL_ALCHEMY_CONN=postgresql+psycopg2://airflow:airflow123@postgres:5432/airflow
AIRFLOW__CELERY__RESULT_BACKEND=db+postgresql://airflow:airflow123@postgres:5432/airflow
AIRFLOW__CELERY__BROKER_URL=redis://:redis123@redis:6379/0

# Airflow Admin User
AIRFLOW_ADMIN_USERNAME=admin
AIRFLOW_ADMIN_PASSWORD=admin123
AIRFLOW_ADMIN_FIRSTNAME=Admin
AIRFLOW_ADMIN_LASTNAME=User
AIRFLOW_ADMIN_EMAIL=admin@pipezone.local

# Airflow Workers
# Options: 1 (light), 2 (balanced), 3 (heavy) - controls parallel task execution
# Recommendation: 1 for development, 2-3 for production
AIRFLOW_WORKER_COUNT=1

# -----------------------------------------------------------------------------
# VS Code Server Configuration
# -----------------------------------------------------------------------------
VSCODE_PASSWORD=changeme123
VSCODE_PORT=8080
VSCODE_HASHED_PASSWORD=

# -----------------------------------------------------------------------------
# Spark Configuration
# -----------------------------------------------------------------------------
SPARK_VERSION=3.5.0
SPARK_MASTER_URL=k8s://https://kubernetes.default.svc
K8S_MASTER_URL=https://kubernetes.default.svc
SPARK_HISTORY_SERVER_PORT=18080

# Spark on Kubernetes
SPARK_KUBERNETES_NAMESPACE=spark-jobs
SPARK_KUBERNETES_CONTAINER_IMAGE=apache/spark-py:v3.5.0

# -----------------------------------------------------------------------------
# Jupyter Configuration
# -----------------------------------------------------------------------------
JUPYTER_ENABLE_LAB=yes
JUPYTER_TOKEN=changeme123

# -----------------------------------------------------------------------------
# Monitoring Configuration
# -----------------------------------------------------------------------------
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin123

# -----------------------------------------------------------------------------
# Nginx Reverse Proxy
# -----------------------------------------------------------------------------
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# -----------------------------------------------------------------------------
# Security Settings
# -----------------------------------------------------------------------------
# Generate with: openssl rand -hex 32
SECRET_KEY=your-secret-key-here-change-in-production

# Session timeout (in hours)
SESSION_TIMEOUT=24

# Enable HTTPS
ENABLE_HTTPS=false
SSL_CERT_PATH=./security/secrets/ssl_cert.pem
SSL_KEY_PATH=./security/secrets/ssl_key.pem

# -----------------------------------------------------------------------------
# Resource Limits
# -----------------------------------------------------------------------------
# Per-user container limits
USER_CONTAINER_CPU_LIMIT=4
USER_CONTAINER_MEMORY_LIMIT=8G
USER_CONTAINER_DISK_LIMIT=50G

# Spark cluster limits
SPARK_EXECUTOR_MEMORY_LIMIT=4G
SPARK_DRIVER_MEMORY_LIMIT=2G

# -----------------------------------------------------------------------------
# Backup Configuration
# -----------------------------------------------------------------------------
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=pipezone-backups
BACKUP_S3_ENDPOINT=
BACKUP_S3_ACCESS_KEY=
BACKUP_S3_SECRET_KEY=

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_MAX_SIZE=100m
LOG_MAX_FILES=10
AUDIT_LOG_ENABLED=true

# -----------------------------------------------------------------------------
# Development Settings
# -----------------------------------------------------------------------------
# Set to 'true' for development mode
DEV_MODE=false
DEBUG=false

# Auto-reload on code changes
AUTO_RELOAD=false

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
ENABLE_USER_REGISTRATION=false
ENABLE_SHARED_FOLDERS=true
ENABLE_CODE_REVIEW=true
ENABLE_NOTEBOOK_SCHEDULER=true
ENABLE_SPARK_INTEGRATION=true
ENABLE_MONITORING=true

# -----------------------------------------------------------------------------
# Notification Settings
# -----------------------------------------------------------------------------
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@pipezone.local
SMTP_USE_TLS=true

# Slack notifications
SLACK_WEBHOOK_URL=
SLACK_CHANNEL=#pipezone-alerts

# -----------------------------------------------------------------------------
# Advanced Settings
# -----------------------------------------------------------------------------
# Timezone
TZ=UTC

# UID/GID for container users
CONTAINER_USER_UID=1000
CONTAINER_USER_GID=1000

# Python version
PYTHON_VERSION=3.11

# Node.js version (for VS Code extensions)
NODE_VERSION=20

# =============================================================================
# End of Configuration
# =============================================================================
